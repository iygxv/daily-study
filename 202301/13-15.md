# 2023/1/13 - 2023/1/5周

## 2023/1/13
计划了每日学习

## 2023/1/14
### 了解requestIdleCallback
RequestIdleCallback 简单的说，判断一帧有空闲时间，则去执行某个任务。目的是为了解决当任务需要长时间占用主进程，导致更高优先级任务(如动画或事件任务)，无法及时响应，而带来的页面丢帧(卡死)情况。故RequestIdleCallback 定位处理的是: 不重要且不紧急的任务。

[MDN解释](https://developer.mozilla.org/zh-CN/docs/Web/API/Window/requestIdleCallback)

[2022年了,还不懂requestIdleCallback么？](https://blog.csdn.net/KlausLily/article/details/122852531)


### 了解window.postMessage和MessageChannel通信方式

[window.postMessage](https://developer.mozilla.org/zh-CN/docs/Web/API/Window/postMessage)

[MessageChannel](https://developer.mozilla.org/zh-CN/docs/Web/API/MessageChannel)

### 了解Object.defineProperty弊端
- 不能监听数组的变化
  
  - (push, pop, shift, unshift, splice, sort, reverse等可以改变数组的方法都不能触发)
  - 直接修改索引也也无法触发
  - 修改数组长度也也无法触发
  
  ```js
  let data = {
    list: []
  }
  
  let value = data['list'];
  Object.defineProperty(data, 'list', {
    get() {
      return value
    },
    set(newValue) {
      console.log('Array Change!!!')
      value = newValue
    }
  })
  
  data.list.push(1) // 没有触发set
  data.list[0] = 3 // 直接修改索引也也无法触发set
  data.list.length = 10 // 修改数组长度也也无法触发set
  
  data.list = [1, 2, 3] // 触发set

- 对象中添加新增和删除属性都无法触发

  - 新增属性本身没这个属性, 所以也没给新属性设置Object.defineProperty
  - 删除属性

  ```js
  let data = {
      name: 'gx',
    }
    Object.defineProperty(data, 'name', {
      get() {
        return value
      },
      set(newValue) {
        console.log('name Change!!!')
        value = newValue
      }
    })
    delete data.name // 无法触发set
  ```

- 必须遍对象的每个属性进行监听

后面补充vue2是怎么对数组方法改写的